.include "macros.s"

.section .text, "ax"  # 0x80005760 - 0x8020BAC0 ; 0x00206360


.global InitMetroTRK
InitMetroTRK:
/* 8020A670 002073D0  38 21 FF FC */	addi r1, r1, -0x4
/* 8020A674 002073D4  90 61 00 00 */	stw r3, 0x0(r1)
/* 8020A678 002073D8  3C 60 80 4C */	lis r3, gTRKCPUState@h
/* 8020A67C 002073DC  60 63 F8 C0 */	ori r3, r3, gTRKCPUState@l
/* 8020A680 002073E0  BC 03 00 00 */	stmw r0, 0x0(r3)
/* 8020A684 002073E4  80 81 00 00 */	lwz r4, 0x0(r1)
/* 8020A688 002073E8  38 21 00 04 */	addi r1, r1, 0x4
/* 8020A68C 002073EC  90 23 00 04 */	stw r1, 0x4(r3)
/* 8020A690 002073F0  90 83 00 0C */	stw r4, 0xc(r3)
/* 8020A694 002073F4  7C 88 02 A6 */	mflr r4
/* 8020A698 002073F8  90 83 00 84 */	stw r4, 0x84(r3)
/* 8020A69C 002073FC  90 83 00 80 */	stw r4, 0x80(r3)
/* 8020A6A0 00207400  7C 80 00 26 */	mfcr r4
/* 8020A6A4 00207404  90 83 00 88 */	stw r4, 0x88(r3)
/* 8020A6A8 00207408  7C 80 00 A6 */	mfmsr r4
/* 8020A6AC 0020740C  60 83 80 00 */	ori r3, r4, 0x8000
/* 8020A6B0 00207410  68 63 80 00 */	xori r3, r3, 0x8000
/* 8020A6B4 00207414  7C 60 01 24 */	mtmsr r3
/* 8020A6B8 00207418  7C 9B 03 A6 */	mtsrr1 r4
/* 8020A6BC 0020741C  48 00 01 F5 */	bl lbl_8020A8B0
/* 8020A6C0 00207420  3C 60 80 4C */	lis r3, gTRKCPUState@h
/* 8020A6C4 00207424  60 63 F8 C0 */	ori r3, r3, gTRKCPUState@l
/* 8020A6C8 00207428  B8 03 00 00 */	.4byte 0xB8030000  /* illegal lmw r0, 0x0(r3) */
/* 8020A6CC 0020742C  38 00 00 00 */	li r0, 0x0
/* 8020A6D0 00207430  7C 12 FB A6 */	mtspr IABR, r0
/* 8020A6D4 00207434  7C 15 FB A6 */	mtspr DABR, r0
/* 8020A6D8 00207438  3C 20 80 4E */	lis r1, 0x804EF938@h
/* 8020A6DC 0020743C  60 21 F9 38 */	ori r1, r1, 0x804EF938@l
/* 8020A6E0 00207440  7C A3 2B 78 */	mr r3, r5
/* 8020A6E4 00207444  48 00 06 4D */	bl lbl_8020AD30
/* 8020A6E8 00207448  2C 03 00 01 */	cmpwi r3, 0x1
/* 8020A6EC 0020744C  40 82 00 14 */	bne lbl_8020A700
/* 8020A6F0 00207450  80 83 00 84 */	lwz r4, 0x84(r3)
/* 8020A6F4 00207454  7C 88 03 A6 */	mtlr r4
/* 8020A6F8 00207458  B8 03 00 00 */	.4byte 0xB8030000  /* illegal lmw r0, 0x0(r3) */
/* 8020A6FC 0020745C  4E 80 00 20 */	blr
lbl_8020A700:
/* 8020A700 00207460  48 00 05 28 */	b lbl_8020AC28

.global lbl_8020A704
lbl_8020A704:
/* 8020A704 00207464  7C 08 02 A6 */	mflr r0
/* 8020A708 00207468  90 01 00 04 */	stw r0, 0x4(r1)
/* 8020A70C 0020746C  94 21 FF F8 */	stwu r1, -0x8(r1)
/* 8020A710 00207470  48 00 07 4D */	bl lbl_8020AE5C
/* 8020A714 00207474  38 21 00 08 */	addi r1, r1, 0x8
/* 8020A718 00207478  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8020A71C 0020747C  7C 08 03 A6 */	mtlr r0
/* 8020A720 00207480  4E 80 00 20 */	blr

.global lbl_8020A724
lbl_8020A724:
/* 8020A724 00207484  3C 80 80 4D */	lis r4, lbl_804CFCF0@ha
/* 8020A728 00207488  38 84 FC F0 */	addi r4, r4, lbl_804CFCF0@l
/* 8020A72C 0020748C  80 84 00 00 */	lwz r4, 0x0(r4)
/* 8020A730 00207490  7C 03 20 40 */	cmplw r3, r4
/* 8020A734 00207494  41 80 00 2C */	blt lbl_8020A760
/* 8020A738 00207498  38 04 40 00 */	addi r0, r4, 0x4000
/* 8020A73C 0020749C  7C 03 00 40 */	cmplw r3, r0
/* 8020A740 002074A0  40 80 00 20 */	bge lbl_8020A760
/* 8020A744 002074A4  3C 80 80 4D */	lis r4, gTRKCPUState@ha
/* 8020A748 002074A8  38 84 F8 C0 */	addi r4, r4, gTRKCPUState@l
/* 8020A74C 002074AC  80 04 02 38 */	lwz r0, 0x238(r4)
/* 8020A750 002074B0  54 00 07 BE */	clrlwi r0, r0, 30
/* 8020A754 002074B4  28 00 00 00 */	cmplwi r0, 0x0
/* 8020A758 002074B8  41 82 00 08 */	beq lbl_8020A760
/* 8020A75C 002074BC  48 00 00 0C */	b lbl_8020A768
lbl_8020A760:
/* 8020A760 002074C0  54 60 00 BE */	clrlwi r0, r3, 2
/* 8020A764 002074C4  64 03 80 00 */	oris r3, r0, 0x8000
lbl_8020A768:
/* 8020A768 002074C8  4E 80 00 20 */	blr
lbl_8020A76C:
/* 8020A76C 002074CC  7C 08 02 A6 */	mflr r0
/* 8020A770 002074D0  90 01 00 04 */	stw r0, 0x4(r1)
/* 8020A774 002074D4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8020A778 002074D8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8020A77C 002074DC  93 C1 00 08 */	stw r30, 0x8(r1)
/* 8020A780 002074E0  7C 7E 1B 78 */	mr r30, r3
/* 8020A784 002074E4  7F C3 F3 78 */	mr r3, r30
/* 8020A788 002074E8  4B FF FF 9D */	bl lbl_8020A724
/* 8020A78C 002074EC  3C 80 80 00 */	lis r4, gTRKInterruptVectorTable@ha
/* 8020A790 002074F0  38 04 34 B8 */	addi r0, r4, gTRKInterruptVectorTable@l
/* 8020A794 002074F4  7C 7F 1B 78 */	mr r31, r3
/* 8020A798 002074F8  7C 80 F2 14 */	add r4, r0, r30
/* 8020A79C 002074FC  7F E3 FB 78 */	mr r3, r31
/* 8020A7A0 00207500  38 A0 01 00 */	li r5, 0x100
/* 8020A7A4 00207504  4B DF 8C C1 */	bl TRK_memcpy
/* 8020A7A8 00207508  7F E3 FB 78 */	mr r3, r31
/* 8020A7AC 0020750C  38 80 01 00 */	li r4, 0x100
/* 8020A7B0 00207510  4B FF E7 E9 */	bl lbl_80208F98
/* 8020A7B4 00207514  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8020A7B8 00207518  83 C1 00 08 */	lwz r30, 0x8(r1)
/* 8020A7BC 0020751C  38 21 00 10 */	addi r1, r1, 0x10
/* 8020A7C0 00207520  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8020A7C4 00207524  7C 08 03 A6 */	mtlr r0
/* 8020A7C8 00207528  4E 80 00 20 */	blr

.global func_8020A7CC
func_8020A7CC:
/* 8020A7CC 0020752C  7C 08 02 A6 */	mflr r0
/* 8020A7D0 00207530  90 01 00 04 */	stw r0, 0x4(r1)
/* 8020A7D4 00207534  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 8020A7D8 00207538  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8020A7DC 0020753C  93 C1 00 10 */	stw r30, 0x10(r1)
/* 8020A7E0 00207540  93 A1 00 0C */	stw r29, 0xc(r1)
/* 8020A7E4 00207544  93 81 00 08 */	stw r28, 0x8(r1)
/* 8020A7E8 00207548  38 60 00 44 */	li r3, 0x44
/* 8020A7EC 0020754C  4B FF FF 39 */	bl lbl_8020A724
/* 8020A7F0 00207550  3B A0 00 00 */	li r29, 0x0
/* 8020A7F4 00207554  83 83 00 00 */	lwz r28, 0x0(r3)
/* 8020A7F8 00207558  3C 60 80 39 */	lis r3, lbl_80396878@ha
/* 8020A7FC 0020755C  57 A4 10 3A */	slwi r4, r29, 2
/* 8020A800 00207560  38 03 68 78 */	addi r0, r3, lbl_80396878@l
/* 8020A804 00207564  7F C0 22 14 */	add r30, r0, r4
/* 8020A808 00207568  48 00 00 04 */	b lbl_8020A80C
lbl_8020A80C:
/* 8020A80C 0020756C  3B E0 00 01 */	li r31, 0x1
/* 8020A810 00207570  48 00 00 04 */	b lbl_8020A814
lbl_8020A814:
/* 8020A814 00207574  48 00 00 04 */	b lbl_8020A818
lbl_8020A818:
/* 8020A818 00207578  7F E0 E8 30 */	slw r0, r31, r29
/* 8020A81C 0020757C  7F 80 00 38 */	and r0, r28, r0
/* 8020A820 00207580  28 00 00 00 */	cmplwi r0, 0x0
/* 8020A824 00207584  41 82 00 0C */	beq lbl_8020A830
/* 8020A828 00207588  80 7E 00 00 */	lwz r3, 0x0(r30)
/* 8020A82C 0020758C  4B FF FF 41 */	bl lbl_8020A76C
lbl_8020A830:
/* 8020A830 00207590  3B DE 00 04 */	addi r30, r30, 0x4
/* 8020A834 00207594  3B BD 00 01 */	addi r29, r29, 0x1
/* 8020A838 00207598  2C 1D 00 0E */	cmpwi r29, 0xe
/* 8020A83C 0020759C  40 81 FF DC */	ble lbl_8020A818
/* 8020A840 002075A0  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 8020A844 002075A4  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 8020A848 002075A8  83 A1 00 0C */	lwz r29, 0xc(r1)
/* 8020A84C 002075AC  83 81 00 08 */	lwz r28, 0x8(r1)
/* 8020A850 002075B0  38 21 00 18 */	addi r1, r1, 0x18
/* 8020A854 002075B4  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8020A858 002075B8  7C 08 03 A6 */	mtlr r0
/* 8020A85C 002075BC  4E 80 00 20 */	blr

.global lbl_8020A860
lbl_8020A860:
/* 8020A860 002075C0  7C 08 02 A6 */	mflr r0
/* 8020A864 002075C4  90 01 00 04 */	stw r0, 0x4(r1)
/* 8020A868 002075C8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8020A86C 002075CC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8020A870 002075D0  3C 60 80 4D */	lis r3, gTRKState@ha
/* 8020A874 002075D4  3B E3 F8 18 */	addi r31, r3, gTRKState@l
/* 8020A878 002075D8  38 00 00 01 */	li r0, 0x1
/* 8020A87C 002075DC  90 1F 00 98 */	stw r0, 0x98(r31)
/* 8020A880 002075E0  4B FF E8 15 */	bl lbl_80209094
/* 8020A884 002075E4  90 7F 00 8C */	stw r3, 0x8c(r31)
/* 8020A888 002075E8  3C 60 80 4D */	lis r3, lbl_804CFCF0@ha
/* 8020A88C 002075EC  38 63 FC F0 */	addi r3, r3, lbl_804CFCF0@l
/* 8020A890 002075F0  3C 00 E0 00 */	lis r0, 0xe000
/* 8020A894 002075F4  90 03 00 00 */	stw r0, 0x0(r3)
/* 8020A898 002075F8  38 60 00 00 */	li r3, 0x0
/* 8020A89C 002075FC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8020A8A0 00207600  38 21 00 10 */	addi r1, r1, 0x10
/* 8020A8A4 00207604  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8020A8A8 00207608  7C 08 03 A6 */	mtlr r0
/* 8020A8AC 0020760C  4E 80 00 20 */	blr
